package controllers;


import java.util.List;

import com.avaje.ebean.Model;

import play.data.DynamicForm;
import play.data.Form;
import play.mvc.*;
import views.html.*;
import accounts.*;

/**Controler managing all account featers.
 * 
 * @author Kamil Malinowski
 *
 */
public class AccountController extends Controller {
	
	public Result loginGet(){
		return ok(login.render());
	}
	public Result registerGet(){
		return ok(register.render(""));
	}
	
	public Result loginPost(){
		@SuppressWarnings("deprecation")
		DynamicForm dynamicForm = Form.form().bindFromRequest();
		return ok(logged.render("Zalogowany jako: "+dynamicForm.get("login")));
	}
	
	@SuppressWarnings({ "deprecation", "unchecked" })
	public Result registerPost() {
		DynamicForm dynamicForm = Form.form().bindFromRequest();
		String login = dynamicForm.get("login");
		@SuppressWarnings("rawtypes")
		List<UserAccount> users = (List<UserAccount>) new Model.Finder(String.class, UserAccount.class).byId(login);
		if(users.size() > 0) {
			return ok(register.render("Ten login ju≈º istnieje!"));
		}
		
	}
}
